# Feature Specification: 탭 기반 메인 네비게이션

**Feature Branch**: `002-main-tab-navigation`
**Created**: 2026-01-08
**Status**: Draft
**Input**: TripAdvisor 스타일 탭 기반 메인 화면 구현 - 탐색, 검색, 저장됨, 알림, 프로필 탭

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 탭 기반 네비게이션 (Priority: P1)

로그인한 사용자가 하단 탭 바를 통해 앱의 주요 기능(탐색, 검색, 저장됨, 알림, 프로필)에 쉽게 접근할 수 있습니다.

**Why this priority**: 앱의 핵심 네비게이션 구조로, 모든 주요 기능에 대한 진입점을 제공합니다.

**Independent Test**: 로그인 후 하단 탭 바가 표시되고 각 탭을 탭하여 해당 화면으로 이동하는지 검증할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 로그인한 사용자, **When** 메인 화면에 진입하면, **Then** 하단에 5개의 탭(탐색, 검색, 저장됨, 알림, 프로필)이 있는 탭 바가 표시됩니다.
2. **Given** 메인 화면에 있는 사용자, **When** 탭 바의 다른 탭을 탭하면, **Then** 해당 탭의 화면으로 즉시 전환됩니다.
3. **Given** 특정 탭에 있는 사용자, **When** 현재 탭을 확인하면, **Then** 선택된 탭이 시각적으로 강조(채워진 아이콘)되어 표시됩니다.
4. **Given** 메인 화면에 처음 진입한 사용자, **When** 탭 바를 확인하면, **Then** 기본적으로 탐색(Explore) 탭이 선택되어 있습니다.

---

### User Story 2 - 탐색 화면 (Priority: P1)

사용자가 탐색 탭에서 추천 장소와 인기 장소 목록을 확인하고 관심 있는 장소를 찾아볼 수 있습니다.

**Why this priority**: 앱의 메인 콘텐츠 탐색 화면으로, 사용자가 가장 먼저 보게 되는 핵심 화면입니다.

**Independent Test**: 탐색 탭에서 추천 카드와 인기 장소 목록이 표시되고 스크롤할 수 있는지 검증할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 탐색 탭에 있는 사용자, **When** 화면을 확인하면, **Then** "오늘의 추천" 섹션이 상단에 가로 스크롤 카드로 표시됩니다.
2. **Given** 탐색 탭에 있는 사용자, **When** 추천 섹션 아래를 확인하면, **Then** "인기 장소" 섹션이 세로 리스트로 표시됩니다.
3. **Given** 탐색 탭에 있는 사용자, **When** 추천 카드를 좌우로 스와이프하면, **Then** 다른 추천 항목들을 볼 수 있습니다.
4. **Given** 인기 장소 목록에서 특정 장소 행을 확인하면, **When** 해당 행을 보면, **Then** 장소 이미지, 이름, 위치, 별점, 리뷰 수가 표시됩니다.

---

### User Story 3 - 검색 화면 (Priority: P2)

사용자가 검색 탭에서 장소, 레스토랑, 호텔 등을 검색하고 카테고리별로 필터링할 수 있습니다.

**Why this priority**: 사용자가 원하는 장소를 능동적으로 찾을 수 있는 중요한 기능입니다.

**Independent Test**: 검색 탭에서 검색어를 입력하고 카테고리 필터를 선택하여 결과가 표시되는지 검증할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 검색 탭에 있는 사용자, **When** 화면 상단을 확인하면, **Then** 검색 입력 필드가 플레이스홀더와 함께 표시됩니다.
2. **Given** 검색 탭에 있는 사용자, **When** 검색 필드 아래를 확인하면, **Then** 카테고리 필터 칩들(전체, 레스토랑, 호텔, 명소, 즐길거리)이 가로 스크롤로 표시됩니다.
3. **Given** 검색어가 비어있는 상태, **When** 화면을 확인하면, **Then** "최근 검색" 목록이 표시됩니다.
4. **Given** 검색어를 입력한 사용자, **When** 검색 결과를 확인하면, **Then** 검색어와 관련된 결과 목록이 표시됩니다.
5. **Given** 검색어가 입력된 상태, **When** 검색 필드 오른쪽의 X 버튼을 탭하면, **Then** 검색어가 지워지고 최근 검색 목록으로 돌아갑니다.
6. **Given** 카테고리 필터 중 하나를 선택하면, **When** 필터를 탭하면, **Then** 선택된 필터가 강조 표시되고 해당 카테고리의 결과만 필터링됩니다.

---

### User Story 4 - 저장됨 화면 (Priority: P2)

사용자가 저장한 장소, 여행 계획, 컬렉션을 관리하고 확인할 수 있습니다.

**Why this priority**: 사용자의 관심사를 저장하고 관리하는 개인화 기능입니다.

**Independent Test**: 저장됨 탭에서 세그먼트(장소, 여행, 컬렉션)를 전환하고 각 콘텐츠가 표시되는지 검증할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 저장됨 탭에 있는 사용자, **When** 화면 상단을 확인하면, **Then** 세그먼트 컨트롤(장소, 여행, 컬렉션)이 표시됩니다.
2. **Given** 저장됨 탭에서 "장소" 세그먼트 선택 시, **When** 저장된 장소가 있으면, **Then** 저장된 장소 목록이 하트 아이콘과 함께 표시됩니다.
3. **Given** 저장됨 탭에서 "여행" 세그먼트 선택 시, **When** 여행 계획이 있으면, **Then** 여행 카드들이 이미지, 제목, 날짜, 장소 수와 함께 표시됩니다.
4. **Given** 저장됨 탭에서 "컬렉션" 세그먼트 선택 시, **When** 컬렉션이 있으면, **Then** 컬렉션 그리드가 썸네일, 이름, 항목 수와 함께 표시됩니다.
5. **Given** 저장됨 탭에 있는 사용자, **When** 네비게이션 바 오른쪽의 + 버튼을 확인하면, **Then** 새 항목 추가 버튼이 표시됩니다.

---

### User Story 5 - 알림 화면 (Priority: P3)

사용자가 알림 탭에서 리뷰 응답, 추천, 여행 리마인더, 프로모션 등의 알림을 확인하고 관리할 수 있습니다.

**Why this priority**: 사용자 참여를 유도하는 보조 기능으로, 핵심 기능 이후 구현해도 됩니다.

**Independent Test**: 알림 탭에서 알림 목록이 표시되고 읽음/삭제 처리가 되는지 검증할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 알림 탭에 있는 사용자, **When** 알림이 있으면, **Then** 알림 목록이 아이콘, 제목, 메시지, 시간과 함께 표시됩니다.
2. **Given** 읽지 않은 알림이 있는 경우, **When** 해당 알림을 확인하면, **Then** 읽지 않은 알림은 강조 배경색과 파란색 점으로 표시됩니다.
3. **Given** 알림 탭에 있는 사용자, **When** 네비게이션 바의 "모두 읽음" 버튼을 탭하면, **Then** 모든 알림이 읽음 상태로 변경됩니다.
4. **Given** 알림 목록에서 특정 알림을 왼쪽으로 스와이프하면, **When** 삭제 동작을 확인하면, **Then** 해당 알림을 삭제할 수 있습니다.
5. **Given** 알림이 없는 경우, **When** 알림 탭에 진입하면, **Then** "알림이 없습니다" 빈 상태 화면이 표시됩니다.

---

### User Story 6 - 프로필 화면 (Priority: P2)

사용자가 프로필 탭에서 자신의 정보를 확인하고, 활동 내역을 보고, 설정을 관리하며, 로그아웃할 수 있습니다.

**Why this priority**: 사용자 계정 관리와 로그아웃 기능을 제공하는 필수 화면입니다.

**Independent Test**: 프로필 탭에서 사용자 정보가 표시되고 로그아웃 버튼이 동작하는지 검증할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 프로필 탭에 있는 사용자, **When** 화면 상단을 확인하면, **Then** 프로필 이미지(또는 이니셜), 이름, 이메일이 표시됩니다.
2. **Given** 프로필 탭에 있는 사용자, **When** 프로필 헤더 아래를 확인하면, **Then** 통계(리뷰 수, 저장됨 수, 여행 수)가 표시됩니다.
3. **Given** 프로필 탭에 있는 사용자, **When** 메뉴 섹션을 확인하면, **Then** "내 활동"(내 리뷰, 내 사진, 북마크)과 "설정"(알림 설정, 개인정보 보호, 도움말) 메뉴가 표시됩니다.
4. **Given** 프로필 탭에 있는 사용자, **When** 로그아웃 버튼을 탭하면, **Then** 로그아웃되고 로그인 화면으로 이동합니다.
5. **Given** 프로필 탭에 있는 사용자, **When** "프로필 수정" 버튼을 확인하면, **Then** 프로필 편집 기능에 접근할 수 있습니다.
6. **Given** 프로필 탭에 있는 사용자, **When** 네비게이션 바 오른쪽의 설정 아이콘을 확인하면, **Then** 앱 설정에 접근할 수 있습니다.

---

### Edge Cases

- 탭 전환 시 이전 탭의 스크롤 위치가 유지되어야 함
- 알림 탭에서 새 알림이 도착하면 탭 바 아이콘에 배지가 표시됨
- 네트워크 오류 시 각 탭에서 적절한 오류 메시지와 재시도 옵션 표시
- 콘텐츠가 없는 빈 상태에서 적절한 빈 상태 UI 표시
- 프로필 탭에서 로그아웃 후 탭 상태 초기화
- 백그라운드에서 포그라운드 복귀 시 알림 탭 새로고침

## Requirements *(mandatory)*

### Functional Requirements

#### 탭 네비게이션

- **FR-001**: 시스템은 하단에 5개의 탭(탐색, 검색, 저장됨, 알림, 프로필)이 있는 탭 바를 표시해야 합니다.
- **FR-002**: 각 탭은 아이콘과 라벨을 포함하고, 선택 시 채워진 아이콘으로 변경되어야 합니다.
- **FR-003**: 기본 선택 탭은 탐색(Explore) 탭이어야 합니다.
- **FR-004**: 탭 전환은 즉시 이루어지고 전환 애니메이션이 자연스러워야 합니다.

#### 탐색 탭

- **FR-005**: 탐색 탭은 "오늘의 추천" 가로 스크롤 섹션을 표시해야 합니다.
- **FR-006**: 탐색 탭은 "인기 장소" 세로 리스트 섹션을 표시해야 합니다.
- **FR-007**: 추천 카드는 이미지, 이름, 별점, 리뷰 수를 표시해야 합니다.
- **FR-008**: 인기 장소 행은 썸네일, 이름, 위치, 별점, 리뷰 수를 표시해야 합니다.

#### 검색 탭

- **FR-009**: 검색 탭은 상단에 검색 입력 필드를 표시해야 합니다.
- **FR-010**: 검색 탭은 카테고리 필터 칩(전체, 레스토랑, 호텔, 명소, 즐길거리)을 가로 스크롤로 표시해야 합니다.
- **FR-011**: 검색어가 비어있을 때 최근 검색 목록을 표시해야 합니다.
- **FR-012**: 검색어 입력 시 관련 검색 결과를 실시간으로 표시해야 합니다.
- **FR-013**: 검색 필드에 입력 취소(X) 버튼을 제공해야 합니다.

#### 저장됨 탭

- **FR-014**: 저장됨 탭은 세그먼트 컨트롤(장소, 여행, 컬렉션)을 제공해야 합니다.
- **FR-015**: 장소 세그먼트는 저장된 장소 목록을 하트 아이콘과 함께 표시해야 합니다.
- **FR-016**: 여행 세그먼트는 여행 계획 카드를 이미지, 제목, 날짜와 함께 표시해야 합니다.
- **FR-017**: 컬렉션 세그먼트는 컬렉션을 2열 그리드로 표시해야 합니다.
- **FR-018**: 네비게이션 바에 새 항목 추가(+) 버튼을 제공해야 합니다.

#### 알림 탭

- **FR-019**: 알림 탭은 알림 목록을 타입별 아이콘, 제목, 메시지, 시간과 함께 표시해야 합니다.
- **FR-020**: 읽지 않은 알림은 강조 배경색과 파란색 점으로 구분해야 합니다.
- **FR-021**: "모두 읽음" 버튼을 제공하여 모든 알림을 읽음 처리할 수 있어야 합니다.
- **FR-022**: 스와이프 동작으로 개별 알림을 삭제할 수 있어야 합니다.
- **FR-023**: 알림이 없을 때 빈 상태 UI를 표시해야 합니다.

#### 프로필 탭

- **FR-024**: 프로필 탭은 사용자 정보(이미지/이니셜, 이름, 이메일)를 표시해야 합니다.
- **FR-025**: 프로필 탭은 사용자 통계(리뷰, 저장됨, 여행 수)를 표시해야 합니다.
- **FR-026**: 프로필 탭은 "내 활동"과 "설정" 메뉴 섹션을 제공해야 합니다.
- **FR-027**: 로그아웃 버튼을 제공하고 탭 시 로그아웃 후 로그인 화면으로 이동해야 합니다.
- **FR-028**: "프로필 수정" 버튼을 제공해야 합니다.
- **FR-029**: 네비게이션 바에 설정 아이콘을 제공해야 합니다.

#### UI/UX

- **FR-030**: 모든 탭 화면은 다크모드를 지원해야 합니다.
- **FR-031**: 탭 바의 선택 색상은 앱의 primaryColor와 일치해야 합니다.
- **FR-032**: 각 탭 내 NavigationStack은 독립적으로 동작해야 합니다.

### Key Entities

- **MainTab**: 탭 종류를 나타내며, explore, search, saved, notifications, profile 값을 가집니다.
- **NotificationItem**: 알림 정보를 나타내며, ID, 타입, 제목, 메시지, 시간, 읽음 여부 속성을 포함합니다.
- **SearchCategory**: 검색 카테고리를 나타내며, all, restaurants, hotels, attractions, activities 값을 가집니다.

### Assumptions

- 로그인한 사용자만 메인 탭 화면에 접근할 수 있습니다.
- 각 탭의 데이터는 서버 API를 통해 가져옵니다 (현재는 더미 데이터로 구현).
- 알림 배지 카운트는 서버에서 푸시 알림과 함께 관리됩니다.
- 검색 기능은 서버 검색 API와 연동됩니다 (현재는 로컬 필터링).
- 저장 기능은 서버와 로컬 캐시를 동기화합니다.

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 사용자가 탭 간 전환을 0.3초 이내에 완료할 수 있습니다.
- **SC-002**: 탐색 탭에서 추천 및 인기 장소 목록이 2초 이내에 표시됩니다.
- **SC-003**: 검색 결과가 검색어 입력 후 1초 이내에 표시됩니다.
- **SC-004**: 모든 탭 화면이 VoiceOver로 100% 탐색 가능합니다.
- **SC-005**: 다크모드와 라이트모드 전환 시 100% UI 요소가 적절히 표시됩니다.
- **SC-006**: 로그아웃 후 3초 이내에 로그인 화면으로 이동합니다.
- **SC-007**: 사용자가 원하는 탭에 2탭 이내(탭 선택 1회)로 접근할 수 있습니다.
